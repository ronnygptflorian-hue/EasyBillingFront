<app-toast-notifications></app-toast-notifications>
<div class="app-layout">
  <aside class="sidebar">
    <div class="sidebar-header">
      <h2>Hi Stratos Invoices</h2>
    </div>

    <nav class="sidebar-nav">
      <a routerLink="/dashboard" routerLinkActive="active" class="nav-item">
        <span class="icon">ğŸ“Š</span>
        <span>Dashboard</span>
      </a>
      <a routerLink="/facturas" routerLinkActive="active" class="nav-item">
        <span class="icon">ğŸ“„</span>
        <span>Facturas</span>
      </a>
      <a
        routerLink="/facturas/crear"
        routerLinkActive="active"
        class="nav-item"
      >
        <span class="icon">â•</span>
        <span>Nueva Factura</span>
      </a>

      <a routerLink="/clientes" routerLinkActive="active" class="nav-item">
        <span class="icon">ğŸ‘¥</span>
        <span>Clientes</span>
      </a>
      <a routerLink="/productos" routerLinkActive="active" class="nav-item">
        <span class="icon">ğŸ“¦</span>
        <span>Productos</span>
      </a>
      <a
        routerLink="/configuraciones"
        routerLinkActive="active"
        class="nav-item"
      >
        <span class="icon">âš™ï¸</span>
        <span>ConfiguraciÃ³n</span>
      </a>

      <a
        routerLink="/facturas-recibidas"
        routerLinkActive="active"
        class="nav-item"
      >
        <span class="icon">ğŸ“„</span>
        <span>Facturas Recibidas</span>
      </a>
    </nav>

    <div class="sidebar-footer">
      <div class="profile-section">
        <button class="profile-trigger" (click)="toggleProfileMenu()">
          <div class="profile-avatar">
            <span class="avatar-icon">ğŸ‘¤</span>
          </div>
          <div class="profile-info">
            <span class="profile-name">{{ userData?.nombre || 'Usuario' }}</span>
            <span class="profile-email">{{ user?.email || userData?.loginName }}</span>
          </div>
          <span class="dropdown-icon" [class.open]="showProfileMenu">â–¼</span>
        </button>

        <div class="profile-dropdown" *ngIf="showProfileMenu">
          <div class="dropdown-header">
            <div class="dropdown-user-info">
              <strong>{{ userData?.nombre || 'Usuario' }}</strong>
              <span class="user-type-badge" [ngClass]="{
                'badge-admin': userData?.tipo === 'A',
                'badge-user': userData?.tipo === 'U'
              }">
                {{ userData?.tipo === 'A' ? 'Administrador' : 'Usuario' }}
              </span>
            </div>
          </div>
          <div class="dropdown-divider"></div>
          <button class="dropdown-item" (click)="goToMiCuenta()">
            <span class="item-icon">ğŸ‘¤</span>
            <span>Mi Cuenta</span>
          </button>
          <button class="dropdown-item" (click)="openChangePasswordModal()">
            <span class="item-icon">ğŸ”‘</span>
            <span>Cambiar ContraseÃ±a</span>
          </button>
          <div class="dropdown-divider"></div>
          <button class="dropdown-item logout" (click)="logout()">
            <span class="item-icon">ğŸšª</span>
            <span>Cerrar SesiÃ³n</span>
          </button>
        </div>
      </div>
    </div>
  </aside>

  <div class="main-wrapper">
    <router-outlet></router-outlet>
  </div>
</div>

<app-modal-change-password
  *ngIf="showChangePasswordModal"
  (close)="closeChangePasswordModal()"
></app-modal-change-password>
