<div class="datepicker-container">
  <div class="datepicker-input" [class.disabled]="disabled" [class.open]="isOpen" (click)="toggleCalendar()">
    <input
      #inputElement
      type="text"
      [value]="displayValue"
      [placeholder]="placeholder"
      [disabled]="disabled"
      readonly
    />
    <svg class="calendar-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
      <line x1="16" y1="2" x2="16" y2="6"></line>
      <line x1="8" y1="2" x2="8" y2="6"></line>
      <line x1="3" y1="10" x2="21" y2="10"></line>
    </svg>
  </div>

  <div
    #dropdownElement
    class="calendar-dropdown"
    [class.open]="isOpen"
    [style.top]="dropdownPosition.top"
    [style.left]="dropdownPosition.left"
    (click)="$event.stopPropagation()">
    <div class="calendar-header">
      <div class="year-navigation">
        <button type="button" class="nav-button-year" (click)="previousYear()">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="11 17 6 12 11 7"></polyline>
            <polyline points="18 17 13 12 18 7"></polyline>
          </svg>
        </button>
        <button type="button" class="nav-button" (click)="previousMonth()">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="15 18 9 12 15 6"></polyline>
          </svg>
        </button>
      </div>

      <div class="month-year">{{ currentMonthYear }}</div>

      <div class="year-navigation">
        <button type="button" class="nav-button" (click)="nextMonth()">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="9 18 15 12 9 6"></polyline>
          </svg>
        </button>
        <button type="button" class="nav-button-year" (click)="nextYear()">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="13 17 18 12 13 7"></polyline>
            <polyline points="6 17 11 12 6 7"></polyline>
          </svg>
        </button>
      </div>
    </div>

    <div class="calendar-body">
      <div class="weekdays">
        <div class="weekday" *ngFor="let day of weekDays">{{ day }}</div>
      </div>

      <div class="days-grid">
        <button
          type="button"
          *ngFor="let day of calendarDays"
          class="day"
          [class.other-month]="!day.isCurrentMonth"
          [class.today]="day.isToday"
          [class.selected]="day.isSelected"
          (click)="selectDate(day)"
        >
          {{ day.day }}
        </button>
      </div>
    </div>

    <div class="calendar-footer">
      <button type="button" class="footer-button clear" (click)="clearDate()">Clear</button>
      <button type="button" class="footer-button today" (click)="goToToday()">Today</button>
    </div>
  </div>
</div>
